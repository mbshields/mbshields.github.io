<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        <link rel="canonical" href="https://mbshields.github.io/introduction/">
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Introduction - docs-sveltos</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/font-awesome.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css">

        <script src="../js/jquery-1.10.2.min.js" defer></script>
        <script src="../js/bootstrap.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">docs-sveltos</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="navitem">
                                <a href=".." class="nav-link">Home</a>
                            </li>
                            <li class="navitem active">
                                <a href="./" class="nav-link">Introduction</a>
                            </li>
                            <li class="navitem">
                                <a href="../getting-started/" class="nav-link">Getting Started</a>
                            </li>
                            <li class="navitem">
                                <a href="../configuration/" class="nav-link">Configuration</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ml-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href=".." class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../getting-started/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="https://github.com/mbshields/mbshields.github.io/edit/master/docs/introduction.md" class="nav-link">Edit on mbshields.github.io
                                    </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-light navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-toggle="collapse" data-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-secondary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-level="1"><a href="#sveltos-a-feature-manager-for-k8s-clusters" class="nav-link">Sveltos - A Feature Manager for K8s Clusters</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-level="2"><a href="#what-is-sveltos" class="nav-link">What is Sveltos?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#how-does-sveltos-help" class="nav-link">How does Sveltos help?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#what-does-sveltos-require" class="nav-link">What does Sveltos require?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#how-does-sveltos-work" class="nav-link">How does Sveltos work?</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#heres-a-quick-example" class="nav-link">Here's a quick example:</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#getting-started-with-a-sandbox" class="nav-link">Getting started with a sandbox</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#getting-started-on-any-kubernetes-cluster" class="nav-link">Getting started on any Kubernetes cluster</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#contributing" class="nav-link">Contributing</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-level="2"><a href="#license" class="nav-link">License</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<p><img src="./images/logo.png" width="200"></p>
<h1 id="sveltos-a-feature-manager-for-k8s-clusters">Sveltos - A Feature Manager for K8s Clusters</h1>
<h2 id="what-is-sveltos">What is Sveltos?</h2>
<p><a href="https://github.com/projectsveltos/sveltos-manager">Sveltos</a> is a tool for policy driven management of features and resources in ClusterAPI powered Kubernetes clusters. Sveltos extends the functionality of ClusterAPI (CAPI) to add management of Kubernetes resources and Helm charts. Sveltos is a lightweight, freely available open source project that can be installed on a Kubernetes cluster in minutes.</p>
<h2 id="how-does-sveltos-help">How does Sveltos help?</h2>
<p>Sveltos provides declarative APIs for provisioning features such as <a href="https://helm.sh">Helm</a> charts, ingress controllers, CNIs, storage classes, and other resources in a set of Kubernetes clusters. </p>
<p>The Sveltos project follows the Kubernetes <a href="https://kubernetes.io/docs/concepts/extend-kubernetes/operator/">Operator pattern</a> and uses <a href="https://kubernetes.io/docs/concepts/architecture/controller/">Controllers</a>, providing a reconcile function responsible for synchronizing resources until the desired state is reached on the cluster. Changes can be modeled, committed, and rolled back if necessary.</p>
<h2 id="what-does-sveltos-require">What does Sveltos require?</h2>
<p>Sveltos requires an existing cluster with <a href="https://github.com/kubernetes-sigs/cluster-api">ClusterAPI</a> installed, which we refer to as a CAPI cluster. ClusterAPI is a Kubernetes sub-project that provides declarative APIs and tooling to simplify provisioning, upgrading, and operating multiple Kubernetes clusters.</p>
<h2 id="how-does-sveltos-work">How does Sveltos work?</h2>
<p>Sveltos policies and operation are defined in a YAML file as a profile that can be applied to a CAPI cluster object. The Sveltos profile directs Kubernetes to perform the following operations:</p>
<ol>
<li>Identify any <a href="https://github.com/kubernetes-sigs/cluster-api/blob/main/api/v1beta1/cluster_types.go">CAPI clusters</a> having a specific Kubernetes <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#label-selectors">label selector</a>.</li>
<li>Deploy Sveltos-specified features (<a href="https://helm.sh">helm releases</a> or Kubernetes resources) on the selected cluster or group of clusters.</li>
</ol>
<h2 id="heres-a-quick-example">Here's a quick example:</h2>
<p>In this example, Sveltos specifies that any CAPI cluster with the label <em>env: prod</em> will have the following features deployed:
*  a Kyverno helm chart (version v2.5.0)
*  a kubernetes resource(s) contained in the referenced Secret: <em>default/storage-class</em>
*  a kubernetes resource(s) contained in the referenced ConfigMap: <em>default/contour</em></p>
<pre><code>apiVersion: config.projectsveltos.io/v1alpha1
kind: ClusterProfile
metadata:
  name: demo
spec:
  clusterSelector: env=prod
  syncMode: Continuous
  helmCharts:
  - repositoryURL: https://kyverno.github.io/kyverno/
    repositoryName: kyverno
    chartName: kyverno/kyverno
    chartVersion: v2.5.0
    releaseName: kyverno-latest
    releaseNamespace: kyverno
    helmChartAction: Install
 policyRefs:
  - name: storage-class
    namespace: default
    kind: Secret
  - name: contour-gateway
    namespace: default
    kind: ConfigMap
</code></pre>
<p>When a CAPI cluster is found to match the <code>clusterSelector</code> <em>env=prod</em>, all of the specified features are automatically deployed in the cluster.</p>
<p>For a simple demonstration, watch the video <a href="https://www.youtube.com/watch?v=Ai5Mr9haWKM">Sveltos Overview</a> on YouTube.</p>
<h2 id="getting-started-with-a-sandbox">Getting started with a sandbox</h2>
<p>If you want to test it out, just execute, <code>make create-cluster</code> and it will:
1. create a <a href="https://sigs.k8s.io/kind">KIND</a> cluster;
2. install ClusterAPI;
3. create a CAPI Cluster with Docker as infrastructure provider;
4. install CRD and the Deployment from this project;
5. create a ClusterProfile instance;
6. modify CAPI Cluster labels so to match ClusterProfile selector.</p>
<h2 id="getting-started-on-any-kubernetes-cluster">Getting started on any Kubernetes cluster</h2>
<p>You can use <a href="https://sigs.k8s.io/kind">KIND</a> to get a local cluster for testing, or run against a remote cluster.</p>
<p>First you need to install ClusterAPI in such cluster. <a href="https://cluster-api.sigs.k8s.io/user/quick-start.html">ClusterAPI instruction</a> can be followed.</p>
<p>Second you need to install the CRD and Deployment for the project in the management cluster:</p>
<h3 id="deploy-yaml">Deploy YAML</h3>
<p>You can post the YAML to the management cluster</p>
<pre><code>kubectl create -f  https://raw.githubusercontent.com/projectsveltos/cluster-api-feature-manager/master/manifest/manifest.yaml
</code></pre>
<h3 id="install-crd-and-deployment">Install CRD and Deployment</h3>
<ol>
<li>. Deploy the controller to the cluster with the image specified by <code>IMG</code>:</li>
</ol>
<pre><code class="language-sh">make deploy IMG=&lt;some-registry&gt;/cluster-api-feature-manager:tag
</code></pre>
<h3 id="uninstall-crds">Uninstall CRDs</h3>
<p>To delete the CRDs from the cluster:</p>
<pre><code class="language-sh">make uninstall
</code></pre>
<h3 id="undeploy-controller">Undeploy controller</h3>
<p>UnDeploy the controller to the cluster:</p>
<pre><code class="language-sh">make undeploy
</code></pre>
<h2 id="contributing">Contributing</h2>
<p>If you have questions, noticed any bug or want to get the latest project news, you can connect with us in the following ways:
1. Open a bug/feature enhancement on github;</p>
<h2 id="license">License</h2>
<p>Copyright 2022.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>
<pre><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre>
<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js" defer></script>
        <script src="../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
